@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-ui-sans: "Figtree", system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
  --font-display-serif: "Newsreader", "Times New Roman", serif;
}

:root {
  /* Section Backgrounds */
  --bg-base: #F5F6F8;           /* Base light background - slightly darker for better contrast */
  --bg-lilac-section: #F4F5FB;  /* Soft analytic lilac sections */
  --bg-card: #FFFFFF;           /* Pure white for all cards */
  --bg-hover: rgba(15, 23, 42, 0.02); /* Subtle hover background */
  --bg-hover-strong: rgba(15, 23, 42, 0.04); /* Stronger hover background */
  --bg-highlight: rgba(15, 23, 42, 0.03); /* Subtle highlight for animations */

  /* Text Colors */
  --color-primary: #0F172A;     /* Main navy/ink */
  --color-primary-hover: #1A2433; /* Primary navy hover (8% lighter) */
  --color-secondary: #6B7280;   /* Secondary text */
  --color-on-primary: #FFFFFF;  /* Text on primary color */
  --color-border: #EDEEF3;      /* Card borders */
  --color-border-hover: #D8DBE5; /* Border hover state */
  --color-bullet: #9CA3AF;      /* Generic bullets */

  /* Scenario Colors */
  --scenario-a-bg: #FFF7ED;     /* Light warm beige/orange */
  --scenario-a-dot: #C2410C;    /* Architectural copper/terracotta */
  --scenario-b-bg: #E3EBE6;     /* Soft sage/mint background */
  --scenario-b-dot: #2F5C45;    /* Forest green dot */

  /* Selection/Active States (Navy/Primary) */
  --selection-border: var(--color-primary); /* Navy border for selected items */
  --selection-bg: rgba(15, 23, 42, 0.02);    /* Navy background for selected items */
  --selection-shadow: 0 4px 16px rgba(15, 23, 42, 0.08); /* Navy outer shadow */
  --selection-shadow-inner: inset 0 1px 4px rgba(15, 23, 42, 0.04); /* Navy inner glow */
  --toggle-bg-inactive: rgba(244, 245, 251, 0.5); /* Very light neutral for toggle background */

  /* Button System */
  --btn-primary-bg: #0F172A;
  --btn-primary-hover-bg: #1A2433;
  --btn-primary-text: #ffffff;
  --btn-primary-shadow: 0 4px 14px rgba(15, 23, 42, 0.15);
  --btn-primary-shadow-hover: 0 6px 20px rgba(15, 23, 42, 0.22);
  
  --btn-secondary-bg: #ffffff;
  --btn-secondary-border: #EDEEF3;
  --btn-secondary-border-hover: #CBD0E5;
  --btn-secondary-hover-bg: rgba(15, 23, 42, 0.02);
  --btn-secondary-text: #0F172A;
  
  --btn-focus-ring: #9F7AEA;    /* Lilac focus ring */

  /* Card System */
  --shadow-card: 0 8px 28px rgba(15, 23, 42, 0.06);
  --shadow-card-soft: 0 8px 24px rgba(15, 23, 42, 0.05);
  --shadow-card-hover: 0 12px 32px rgba(15, 23, 42, 0.10);
  --radius-card: 24px;          /* All cards */
  --radius-pill: 999px;         /* Buttons and pills */

  /* Section Spacing */
  --section-padding-y-desktop: 96px;
  --section-padding-y-mobile: 64px;

  /* Motion */
  --transition-duration: 200ms;
  --transition-easing: ease-out;
}

@layer base {
  * {
    @apply border-gray-200;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    overscroll-behavior: none;
  }

  html {
    overflow-x: hidden;
  }

  body {
    @apply bg-[var(--bg-base)] text-[var(--color-primary)] font-uiSans antialiased;
    position: relative;
    min-height: 100vh;
  }

  h1,
  h2,
  h3 {
    @apply font-displaySerif font-bold text-[var(--color-primary)] tracking-tight;
  }

  h4,
  h5,
  h6 {
    @apply font-uiSans font-semibold text-[var(--color-primary)];
  }

  p {
    @apply font-uiSans text-[var(--color-secondary)] text-base leading-relaxed;
  }

  @keyframes fadeIn {
    from {
      opacity: 0.5;
    }
    to {
      opacity: 1;
    }
  }

  /* Float Animation for 3D Objects */
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
  
  /* Helper delay classes */
  .delay-700 {
    animation-delay: 700ms;
  }
  .delay-1000 {
    animation-delay: 1000ms;
  }

  /* Calculator-specific utility classes */
  .calc-section-title {
    @apply font-uiSans font-semibold text-[var(--color-primary)] text-xl md:text-2xl;
    letter-spacing: -0.01em;
  }

  /* Standard section title with spacing */
  .section-title {
    @apply font-uiSans font-bold text-slate-900 text-xl md:text-2xl;
    letter-spacing: -0.01em;
    margin-bottom: 24px; /* Standard spacing */
  }

  .calc-result-value {
    @apply font-displaySerif font-semibold text-[var(--color-primary)];
    font-size: 1.5rem;      /* 24px on mobile */
    line-height: 1.25;
  }

  @media (min-width: 768px) {
    .calc-result-value {
      font-size: 1.75rem;   /* 28px */
    }
  }

  .calc-scenario-label {
    @apply text-xs font-uiSans text-[var(--color-secondary)];
    letter-spacing: 0.02em;
  }

  /* Input styles for uncertainty-inputs triple mini inputs */
  .calc-input {
    @apply w-full rounded-full bg-white text-[var(--color-primary)] font-uiSans;
    border: 1px solid var(--color-border);
    padding: 10px 14px;
    font-size: 16px;  /* Must be 16px minimum to prevent iOS auto-zoom */
    line-height: 1.4;
    outline: none;
    transition: border-color var(--transition-duration) var(--transition-easing),
                box-shadow var(--transition-duration) var(--transition-easing),
                background-color var(--transition-duration) var(--transition-easing);
  }

  .calc-input:hover:not(:focus) {
    border-color: var(--color-border-hover);
  }

  .calc-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(15, 23, 42, 0.15),
                0 8px 20px rgba(15, 23, 42, 0.08);
    background-color: #ffffff;
  }

  .calc-input-unit {
    @apply absolute inset-y-0 right-4 flex items-center text-sm font-uiSans;
    color: var(--color-secondary);
    pointer-events: none;
  }

  .calc-secondary-button {
    @apply w-full rounded-[var(--radius-pill)] px-6 py-3 font-uiSans text-base font-medium;
    background: white;
    border: 1px solid var(--color-border);
    color: var(--color-primary);
    transition: border-color var(--transition-duration) var(--transition-easing),
                box-shadow var(--transition-duration) var(--transition-easing);
  }

  .calc-secondary-button:hover {
    border-color: var(--color-border-hover);
    box-shadow: var(--shadow-card);
  }

  .calc-collapse-header {
    @apply flex items-center justify-between w-full;
    padding: 12px 16px;
    background-color: #F3F4F6;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color var(--transition-duration) var(--transition-easing),
                box-shadow var(--transition-duration) var(--transition-easing);
  }

  .calc-collapse-header:hover {
    box-shadow: var(--shadow-card);
  }

  .calc-collapse-header-title {
    @apply font-uiSans font-medium text-[var(--color-primary)];
  }

  /* Settings Drawer Pattern */
  .settings-drawer {
    @apply w-full flex items-center justify-between px-5 py-4 transition-all duration-200;
    background-color: #F8FAFC; /* Slightly darker than page, lighter than input */
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md); /* 12px */
    cursor: pointer;
  }

  .settings-drawer:hover {
    background-color: #F1F5F9; /* Darker gray on hover */
    border-color: var(--color-border-hover);
  }
  
  .settings-drawer[data-state='open'] {
    background-color: #F1F5F9;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom-color: transparent;
  }

  .settings-drawer-content {
    @apply px-5 pb-6 pt-2;
    background-color: #F8FAFC;
    border: 1px solid var(--color-border);
    border-top: none;
    border-bottom-left-radius: var(--radius-md);
    border-bottom-right-radius: var(--radius-md);
    margin-bottom: 16px; /* Space between drawers */
  }

  /* Slider Input Styling */
  .slider-input {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 32px; /* Increased hit area */
    background: transparent;
    outline: none;
    cursor: pointer;
  }

  /* Webkit (Chrome, Safari) Track */
  .slider-input::-webkit-slider-runnable-track {
    width: 100%;
    height: 6px; /* Reduced to 6px for subtle guide rail feel */
    border-radius: 999px;
    background: linear-gradient(to right, 
      var(--color-primary) 0%, 
      var(--color-primary) var(--slider-progress, 0%), 
      #E5E7EB var(--slider-progress, 0%), 
      #E5E7EB 100%);
    transition: opacity 0.2s;
  }

  .slider-input:hover::-webkit-slider-runnable-track {
    opacity: 0.9;
  }

  /* Webkit (Chrome, Safari) Thumb */
  .slider-input::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 28px;
    height: 28px;
    margin-top: -11px; /* (6px track - 28px thumb) / 2 = -11px */
    border-radius: 50%;
    background: var(--color-primary);
    cursor: grab;
    border: 2px solid white;
    box-shadow: 0 4px 8px rgba(15, 23, 42, 0.25), 0 0 0 2px #ffffff;
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
  }

  .slider-input::-webkit-slider-thumb:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 10px rgba(15, 23, 42, 0.3), 0 0 0 2px #ffffff;
  }

  .slider-input::-webkit-slider-thumb:active {
    transform: scale(1.1);
    cursor: grabbing;
    box-shadow: 0 6px 12px rgba(15, 23, 42, 0.35), 0 0 0 2px #ffffff;
  }

  /* Firefox Track */
  .slider-input::-moz-range-track {
    width: 100%;
    height: 6px; /* Reduced to 6px for subtle guide rail feel */
    border-radius: 999px;
    background: linear-gradient(to right, 
      var(--color-primary) 0%, 
      var(--color-primary) var(--slider-progress, 0%), 
      #E5E7EB var(--slider-progress, 0%), 
      #E5E7EB 100%);
    transition: opacity 0.2s;
  }

  /* Firefox Thumb */
  .slider-input::-moz-range-thumb {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--color-primary);
    cursor: grab;
    border: 2px solid white;
    box-shadow: 0 4px 8px rgba(15, 23, 42, 0.25), 0 0 0 2px #ffffff;
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
  }

  .slider-input::-moz-range-thumb:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 10px rgba(15, 23, 42, 0.3), 0 0 0 2px #ffffff;
  }

  .slider-input::-moz-range-thumb:active {
    transform: scale(1.1);
    cursor: grabbing;
    box-shadow: 0 6px 12px rgba(15, 23, 42, 0.35), 0 0 0 2px #ffffff;
  }

  /* Animations */
  @keyframes highlight {
    0% {
      background-color: var(--bg-highlight);
    }
    100% {
      background-color: white;
    }
  }

  @keyframes result-fade {
    0% {
      opacity: 0.6;
      transform: scale(0.98);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Accordion animations */
  @keyframes accordion-down {
    from {
      height: 0;
      opacity: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
      opacity: 1;
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
      opacity: 1;
    }
    to {
      height: 0;
      opacity: 0;
    }
  }

  .animate-accordion-down {
    animation: accordion-down 200ms cubic-bezier(0.2, 0, 0, 1);
  }

  .animate-accordion-up {
    animation: accordion-up 150ms cubic-bezier(0.4, 0, 1, 1);
  }

  /* Card highlight animation for scroll-to */
  @keyframes card-highlight {
    0% {
      box-shadow: 0 20px 60px -15px rgba(0,0,0,0.08);
    }
    30% {
      box-shadow: 0 20px 60px -15px rgba(0,0,0,0.08), 0 0 0 3px rgba(15, 23, 42, 0.12);
    }
    100% {
      box-shadow: 0 20px 60px -15px rgba(0,0,0,0.08);
    }
  }

  .card-highlight-animation {
    animation: card-highlight 800ms cubic-bezier(0.2, 0, 0, 1);
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .animate-accordion-down,
    .animate-accordion-up {
      animation-duration: 1ms !important;
    }
    
    .card-highlight-animation {
      animation: none !important;
    }
    
    * {
      scroll-behavior: auto !important;
    }
  }

  /* Logo Wordmark - Premium Wealthsimple-style */
  .nav-logo {
    margin-right: auto !important;
    display: inline-flex;
    align-items: center;
  }

  .nav-logo-text {
    font-family: var(--font-ui-sans);
    font-weight: 600;
    letter-spacing: 0.2px;
    color: var(--color-primary);
    font-size: 20px;          /* mobile size */
    padding-top: 12px;        /* reduce wasted vertical space */
    padding-bottom: 12px;
  }

  .nav-logo-tld {
    color: var(--color-secondary); /* subtle grey .cz */
  }

  @media (min-width: 768px) {
    .nav-logo-text {
      font-size: 22px;        /* desktop size */
      padding-top: 14px;
      padding-bottom: 14px;
    }

    .nav-logo {
      margin-right: 48px !important;
    }
  }

  /* Remove number input spinners/steppers */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }

  /* Hide scrollbar for apartment carousel */
  .overflow-x-auto::-webkit-scrollbar {
    display: none;
  }
}
